{"data":{"aspectRatio":"custom"},"h":788,"id":"771639ea","type":"frame","w":1435,"x":5540,"y":-114,"z":0}
{"data":{"aspectRatio":"custom"},"h":964,"id":"a76f3ee5","type":"frame","w":2219,"x":9192,"y":171,"z":-1}
{"data":{"color":"#002bdb","state":"paused","time":1648680425288,"total":1866690},"h":41,"id":"908f294a","type":"timer","w":208,"x":5884,"y":74,"z":46}
{"data":{"color":"#002bdb","state":"paused","time":1648683250545,"total":209853},"h":100,"id":"57b1e3ca","type":"timer","w":250,"x":6416,"y":-31,"z":50}
{"data":{"color":"#002bdb","state":"paused","time":1649001723979,"total":545267},"h":100,"id":"6fdfc1e3","type":"timer","w":250,"x":11543,"y":196,"z":81}
{"data":{"color":"#002bdb","state":"paused","time":1649003063920,"total":1307157},"h":100,"id":"14e8051c","type":"timer","w":250,"x":11740,"y":381,"z":83}
{"data":{"color":"#002bdb","state":"running","time":1648687598351,"total":1502142},"h":57,"id":"b36cc760","type":"timer","w":213,"x":7723,"y":-53,"z":56}
{"data":{"color":"#009ac1","path":[0,0,0,0.9333333333343035,0,1.866666666666788,0,3.733333333333576,0,5.600000000000364,0,8.399999999999636,0,12.133333333333212,0,16.80000000000109,0,22.399999999999636,0,28.933333333334303,0,37.33333333333394,0,45.733333333333576,0.9333333333324845,55.066666666667516,0.9333333333324845,64.39999999999964,1.866666666666788,74.66666666666606,2.7999999999992724,82.13333333333321,2.7999999999992724,89.60000000000036,3.733333333333576,98,4.66666666666606,106.39999999999964,4.66666666666606,113.86666666666679,4.66666666666606,121.33333333333394,4.66666666666606,127.86666666666679,4.66666666666606,133.46666666666715,4.66666666666606,139.06666666666752,4.66666666666606,144.66666666666606,4.66666666666606,149.33333333333394,4.66666666666606,152.1333333333332,4.66666666666606,156.8000000000011,4.66666666666606,160.53333333333285,4.66666666666606,163.33333333333394,4.66666666666606,168,4.66666666666606,168.9333333333343,4.66666666666606,171.73333333333358,4.66666666666606,173.60000000000036,4.66666666666606,176.39999999999964,4.66666666666606,178.26666666666642,4.66666666666606,180.1333333333332,4.66666666666606,182,4.66666666666606,183.8666666666668,4.66666666666606,185.73333333333358,4.66666666666606,187.60000000000036,4.66666666666606,189.46666666666715,4.66666666666606,191.33333333333394,5.600000000000364,193.20000000000073,5.600000000000364,194.1333333333332,6.533333333332848,196,6.533333333332848,196.9333333333343,7.466666666667152,197.8666666666668,7.466666666667152,198.8000000000011,7.466666666667152,199.73333333333358,8.399999999999636,199.73333333333358,8.399999999999636,200.66666666666606,8.399999999999636,200.66666666666606],"radius":4},"h":202,"id":"4c48322a","type":"pen","w":9,"x":3921,"y":1518,"z":33}
{"data":{"color":"#009ac1","path":[0,0,0,1,0,3,0,4,0,5,0,7,1,7,1,8,3,8,4,10,5,11,7,11,8,12,10,12,11,12,12,14,14,14,15,15,17,15,18,17,19,17,21,17,22,17,24,17,25,17,26,14,28,12,28,11,29,10,29,8,29,7,29,5,29,4,29,3,28,1,28,1],"radius":4},"h":18,"id":"848049a4","type":"pen","w":30,"x":131,"y":1212,"z":9}
{"data":{"color":"#009ac1","path":[0,0,0,1],"radius":4},"h":2,"id":"6a0190ab","type":"pen","w":1,"x":131,"y":1198,"z":6}
{"data":{"color":"#009ac1","path":[0,0,0.9333333333324845,0,2.7999999999992724,0,6.533333333332848,0,13.066666666665697,0,21.46666666666715,0,32.66666666666606,0,48.53333333333285,0,64.39999999999964,0,80.26666666666642,0,103.60000000000036,0,126,0,142.79999999999927,0,166.1333333333332,0,192.26666666666642,0.9333333333343035,210.93333333333248,1.866666666666788,227.73333333333358,3.733333333333576,245.46666666666715,4.666666666667879,261.33333333333394,6.533333333334667,273.46666666666715,7.466666666667152,282.7999999999993,8.400000000001455,293.0666666666657,9.33333333333394,303.33333333333394,11.200000000000728,310.7999999999993,12.133333333333212,318.2666666666664,13.066666666667516,324.7999999999993,14,329.46666666666715,14.933333333334303,334.1333333333332,15.866666666666788,336,16.80000000000109,338.7999999999993,16.80000000000109,340.66666666666606,17.733333333333576,342.53333333333285,17.733333333333576,343.46666666666715,17.733333333333576,344.39999999999964,17.733333333333576,345.33333333333394,17.733333333333576,346.2666666666664,17.733333333333576,347.2000000000007,17.733333333333576,348.1333333333332,17.733333333333576,348.1333333333332,18.66666666666788,348.1333333333332,19.600000000000364,347.2000000000007,19.600000000000364],"radius":4},"h":21,"id":"431b5466","type":"pen","w":349,"x":3567,"y":1498,"z":20}
{"data":{"color":"#009ac1","path":[0,0],"radius":4},"h":1,"id":"2e66dd99","type":"pen","w":1,"x":148,"y":1199,"z":7}
{"data":{"color":"#009ac1","path":[0,0],"radius":4},"h":1,"id":"99db1f85","type":"pen","w":1,"x":3527,"y":1494,"z":34}
{"data":{"color":"#009ac1","path":[0,0],"radius":4},"h":1,"id":"eddadfd5","type":"pen","w":1,"x":142,"y":1210,"z":8}
{"data":{"color":"#009ac1","path":[0,6.533333333334667,1.866666666666788,6.533333333334667,4.666666666667879,6.533333333334667,11.200000000000728,6.533333333334667,22.399999999999636,6.533333333334667,42,6.533333333334667,70.9333333333343,6.533333333334667,104.53333333333467,6.533333333334667,140.9333333333343,5.600000000000364,174.53333333333467,3.733333333333576,203.46666666666715,2.8000000000010914,235.20000000000073,0.9333333333343035,262.2666666666664,0,281.8666666666668,0,302.39999999999964,0,317.33333333333394,0,326.6666666666679,0,337.8666666666668,0,344.39999999999964,0,350,0,356.53333333333467,0,360.2666666666664,0,364,0,364.9333333333343,0,366.8000000000011,0,367.7333333333336,0,368.6666666666679,0,369.60000000000036,0,370.53333333333467,0,370.53333333333467,0],"radius":4},"h":8,"id":"1549933f","type":"pen","w":372,"x":3558,"y":1724,"z":21}
{"data":{"color":"#009ac1","path":[0,99,0,101,0,105,0,112,0,113,0,116,0,117,0,118,0,119,0,120,0,121,2,121,6,120,11,117,21,111,36,101,50,92,68,79,86,66,100,55,115,43,125,33,134,25,141,18,145,14,153,7,154,6,157,3,159,2,159,1,160,0,161,0,161,0],"radius":4},"h":122,"id":"5fffbbf3","type":"pen","w":162,"x":7427,"y":648,"z":59}
{"data":{"color":"#009ac1","path":[204,3,203,3,202,3,198,3,192,3,186,3,177,3,166,3,153,3,138,3,124,4,110,6,96,8,84,13,73,18,63,24,54,31,45,38,37,47,31,55,25,64,19,73,15,83,10,94,7,103,5,114,3,124,1,134,0,145,0,150,0,158,0,166,1,175,4,183,8,193,14,203,20,212,28,220,36,227,44,234,53,240,63,246,74,252,86,257,98,262,111,266,125,270,139,273,153,275,168,277,182,278,196,280,209,281,222,282,238,284,251,286,262,287,271,288,279,288,288,289,309,289,313,289,322,289,328,287,334,284,341,281,348,276,354,272,360,268,366,264,372,259,378,254,383,250,388,246,392,242,395,238,398,234,401,229,403,224,405,219,407,213,409,208,410,202,411,196,412,191,413,187,414,182,415,177,415,173,416,169,416,166,416,162,416,157,416,151,415,142,414,139,412,133,409,126,406,119,403,112,399,106,395,101,391,95,387,90,382,86,378,82,375,78,371,75,368,72,364,68,360,65,356,62,353,58,349,54,345,51,341,47,337,44,333,40,329,37,325,34,322,31,318,27,314,25,310,22,306,20,301,17,296,15,289,12,288,12,285,10,280,9,276,8,274,7,270,6,266,5,263,4,260,3,257,3,253,2,249,2,246,1,242,1,239,0,236,0,233,0,230,0,226,0,223,0,219,1,216,2,213,4,209,6,207,8,204,10,202,12,200,14,198,15,197,16],"radius":4},"h":290,"id":"c50264e0","type":"pen","w":417,"x":7040,"y":540,"z":58}
{"data":{"color":"#009ac1","path":[42.9333333333343,0.9333333333343035,42,0.9333333333343035,41.066666666667516,0.9333333333343035,40.13333333333321,0.9333333333343035,38.266666666666424,0.9333333333343035,36.400000000001455,0.9333333333343035,34.53333333333467,0.9333333333343035,33.600000000000364,0.9333333333343035,31.733333333333576,0.9333333333343035,29.866666666666788,0.9333333333343035,28,0.9333333333343035,27.066666666667516,0.9333333333343035,26.133333333333212,0.9333333333343035,25.200000000000728,0.9333333333343035,24.266666666666424,0.9333333333343035,23.33333333333394,0.9333333333343035,22.400000000001455,0.9333333333343035,20.533333333334667,0.9333333333343035,19.600000000000364,0.9333333333343035,18.66666666666788,0.9333333333343035,17.733333333333576,0.9333333333343035,15.866666666666788,0.9333333333343035,14.933333333334303,0.9333333333343035,13.066666666667516,0.9333333333343035,12.133333333333212,0.9333333333343035,10.266666666666424,0.9333333333343035,8.400000000001455,0.9333333333343035,7.466666666667152,0.9333333333343035,5.600000000000364,0.9333333333343035,4.666666666667879,0,3.733333333333576,0,2.8000000000010914,0,1.866666666666788,0,0.9333333333343035,0,0,0,0,1.866666666666788,0.9333333333343035,2.8000000000010914,1.866666666666788,5.600000000000364,2.8000000000010914,7.466666666667152,3.733333333333576,11.200000000000728,4.666666666667879,14.933333333334303,5.600000000000364,19.600000000000364,6.533333333334667,24.266666666666424,7.466666666667152,30.80000000000109,8.400000000001455,37.33333333333394,8.400000000001455,42.9333333333343,9.33333333333394,49.46666666666715,9.33333333333394,55.066666666667516,9.33333333333394,60.66666666666788,9.33333333333394,67.20000000000073,9.33333333333394,71.86666666666679,9.33333333333394,77.46666666666715,9.33333333333394,82.13333333333321,9.33333333333394,85.86666666666679,9.33333333333394,89.60000000000036,8.400000000001455,94.26666666666642,8.400000000001455,97.06666666666752,7.466666666667152,99.86666666666679,7.466666666667152,102.66666666666788,6.533333333334667,104.53333333333467,6.533333333334667,107.33333333333394,6.533333333334667,109.20000000000073,5.600000000000364,111.06666666666752,5.600000000000364,113.86666666666679,5.600000000000364,115.73333333333358,5.600000000000364,118.53333333333467,5.600000000000364,120.39999999999964,5.600000000000364,123.20000000000073,5.600000000000364,124.13333333333321,4.666666666667879,126,4.666666666667879,128.8000000000011,4.666666666667879,129.73333333333358,4.666666666667879,131.60000000000036,4.666666666667879,133.46666666666715,4.666666666667879,135.33333333333394,4.666666666667879,137.20000000000073,4.666666666667879,138.1333333333332,4.666666666667879,140,4.666666666667879,141.8666666666668,4.666666666667879,142.8000000000011,4.666666666667879,144.66666666666788,4.666666666667879,146.53333333333467,4.666666666667879,148.39999999999964,4.666666666667879,150.26666666666642,4.666666666667879,153.06666666666752,4.666666666667879,155.8666666666668,4.666666666667879,157.73333333333358,5.600000000000364,159.60000000000036,5.600000000000364,161.46666666666715,6.533333333334667,163.33333333333394,6.533333333334667,165.20000000000073,6.533333333334667,167.06666666666752,7.466666666667152,168,7.466666666667152,169.8666666666668,7.466666666667152,170.8000000000011,7.466666666667152,172.66666666666788,8.400000000001455,173.60000000000036,8.400000000001455,174.53333333333467,8.400000000001455,175.46666666666715,8.400000000001455,176.39999999999964,8.400000000001455,178.26666666666642,8.400000000001455,179.20000000000073,9.33333333333394,180.1333333333332,9.33333333333394,181.06666666666752,9.33333333333394,182,9.33333333333394,182.9333333333343,9.33333333333394,183.8666666666668,9.33333333333394,184.8000000000011,9.33333333333394,185.73333333333358,9.33333333333394,187.60000000000036,9.33333333333394,188.53333333333467,10.266666666666424,189.46666666666715,10.266666666666424,191.33333333333394,10.266666666666424,192.26666666666642,10.266666666666424,193.20000000000073,10.266666666666424,195.06666666666752,10.266666666666424,196,10.266666666666424,196.9333333333343,11.200000000000728,198.8000000000011,11.200000000000728,199.73333333333358,11.200000000000728,201.60000000000036,11.200000000000728,202.53333333333467,11.200000000000728,203.46666666666715,11.200000000000728,204.39999999999964,11.200000000000728,206.26666666666642,11.200000000000728,207.20000000000073,11.200000000000728,208.1333333333332,12.133333333333212,209.06666666666752,12.133333333333212,210,12.133333333333212,210.9333333333343,12.133333333333212,211.8666666666668,12.133333333333212,212.8000000000011,13.066666666667516,214.66666666666788,13.066666666667516,215.60000000000036,14,217.46666666666715,14,218.39999999999964,14.933333333334303,220.26666666666642,14.933333333334303,221.20000000000073,14.933333333334303,222.1333333333332,14.933333333334303,223.06666666666752,14.933333333334303,224,14.933333333334303,224.9333333333343,15.866666666666788,224.9333333333343,15.866666666666788,225.8666666666668,15.866666666666788,225.8666666666668],"radius":4},"h":227,"id":"96da72cb","type":"pen","w":44,"x":3528,"y":1500,"z":32}
{"data":{"color":"#009ac1","path":[57,1,56,1,55,1,53,1,52,0,50,0,48,0,46,0,43,0,42,0,41,0,38,0,36,0,35,0,32,0,31,0,28,0,27,1,25,3,22,4,21,5,20,7,17,8,15,9,14,11,13,14,10,15,8,16,6,19,6,21,4,22,3,23,3,25,2,28,0,29,0,32,0,33,0,35,0,37,0,39,0,42,0,43,0,44,0,46,0,47,2,50,3,51,4,53,6,54,8,56,10,58,11,60,14,61,17,63,20,64,22,65,24,65,27,67,31,68,32,70,35,70,39,70,45,71,46,71,49,71,50,71,53,71,56,71,57,71,60,71,62,70,63,68,66,68,67,67,69,67,69,65,70,64,71,64,73,63,73,61,74,61,76,60,76,58,76,57,77,56,77,54,77,53,77,51,77,50,77,49,77,47,77,46,77,43,77,42,77,40,77,37,77,36,77,35,77,33,76,32,76,30,74,30,74,29,74,28,73,26,73,25,71,25,71,23,70,23,70,22,69,22,69,21,69,19,67,19,67,18,66,18,66,16,66,15,64,15,64,14,63,12,62,11,62,9,60,9,60,8,59,8,59,7,57,7,57,5,56,5,56,4,55,4,55,3,53,3,52,3,50,3,50,3],"radius":4},"h":72,"id":"95fe8dd7","type":"pen","w":78,"x":100,"y":1173,"z":5}
{"data":{"color":"#0d47a1","fontFamily":"Arial Black","fontSize":17,"state":"paused","time":1649108141449,"total":787344},"h":100,"id":"ae470ed3","type":"timer","w":250,"x":15208,"y":305,"z":99}
{"data":{"color":"#0d47a1","fontFamily":"Arial Black","fontSize":17,"state":"paused","time":1649111030291,"total":2854297},"h":100,"id":"17f0e288","type":"timer","w":250,"x":14660,"y":522,"z":100}
{"data":{"color":"#0d47a1","fontSize":44,"icon":"pen"},"h":49,"id":"3991aee0","type":"icon","w":49,"x":2377,"y":427,"z":15}
{"data":{"color":"#1976d2","fontSize":17},"h":151,"id":"920c11ac","str":"definitely this should be saved until _**after**_ i release the whiteboard; clearly not a blocker.\n\n","type":"note","w":250,"x":7175,"y":600,"z":57}
{"data":{"color":"#1976d2","fontSize":17},"h":192,"id":"4fc490dc","str":"# CoCalc Blame\n\nLike `git blame`, but for cocalc... I'm suddenly seriously wondering about how difficult it would be to track \"who changed this\" for sync.  There are two cases:\n\n","type":"note","w":505,"x":7102,"y":-59,"z":53}
{"data":{"color":"#1976d2","fontSize":17},"h":303,"id":"b7937e31","str":"## text documents\n\nThis is about tracking who changed a specific line.\n\n- who last changed line n \\-\\- like hackpad displays\n- everybody who changed line n, when they did it, etc.\n- patches history\n- info is definitely there... though adding/removing lines from the document makes this technically tricky to compute.\n\n","type":"note","w":511,"x":7102,"y":166,"z":54}
{"data":{"color":"#1976d2","fontSize":17},"h":331,"id":"6e79ec61","str":"Another approach to this problem would be like with chat \\-\\- have redundant info about how last edited an element be in the element itself.\n\n- waste of space\n- makes client more complicated.\n- but maybe actually works well \\(?\\), after all we won't need to use space with all that caching/snapshotting info.\n- So... how would this work?\n- Could have a field user.\n- NO!  I can't even begin to bring myself to do something so hideous.\n- Hmmm...\n\n","type":"note","w":611,"x":7637,"y":799,"z":60}
{"data":{"color":"#1976d2","fontSize":17},"h":533,"id":"4ab4d8a1","str":"## db\\-style documents\n\nAbout tracking who last changed a given record, and history of who changed it when.\n\nRecord is a row, defined by primary key.\n\n- the _information_ about this is definitely in the patches history already\n- pretty easy to track and define.\n- computing this seems like one linear pass through entire history, or loaded history \\(to give partial info\\), and then work forward from there.\n- This would be very efficient to compute given our current data.\n- Most annoying thing is \\(1\\) snapshot, \\(2\\) refresh, \\(3\\) get only stuff since that snapshot... would mean that all the info about attribution dies if we don't store it in the snapshot.\n\n  - so snapshot could have info up until that point.\n  - Thus probably makes sense to store the map from ids to users at each snapshot point, then compute for intermediates.\n\n","type":"note","w":600,"x":7637,"y":166,"z":55}
{"data":{"color":"#1976d2","fontSize":17},"h":95,"id":"27a5139a","str":"# Whiteboard \\+ Jupyter\n\n","type":"note","w":456,"x":9196,"y":68,"z":62}
{"data":{"color":"#252937","from":"070d24d4","radius":0.5,"to":"b19c0a0c"},"h":0,"id":"f6a60a89","type":"edge","w":0,"x":0,"y":0,"z":72}
{"data":{"color":"#252937","from":"0a5eb217","radius":0.5,"to":"ea081c4f"},"h":0,"id":"9eeeba7d","type":"edge","w":0,"x":0,"y":0,"z":96}
{"data":{"color":"#252937","from":"12c570b5","radius":0.5,"to":"86ae19f7"},"h":0,"id":"f6c022e9","type":"edge","w":0,"x":0,"y":0,"z":4}
{"data":{"color":"#252937","from":"21ca8bc2","radius":0.5,"to":"50a1465f"},"h":0,"id":"7682232d","type":"edge","w":0,"x":0,"y":0,"z":105}
{"data":{"color":"#252937","from":"263d4f1c","radius":0.5,"to":"e2cb5dbf"},"h":0,"id":"48283e47","type":"edge","w":0,"x":0,"y":0,"z":19}
{"data":{"color":"#252937","from":"26c83e97","radius":0.5,"to":"645d7d50"},"h":0,"id":"cba6e0de","type":"edge","w":0,"x":0,"y":0,"z":74}
{"data":{"color":"#252937","from":"4101819d","radius":0.5,"to":"60beee84"},"h":0,"id":"2c90067d","type":"edge","w":0,"x":0,"y":0,"z":2}
{"data":{"color":"#252937","from":"4ab4d8a1","radius":0.5,"to":"6e79ec61"},"h":0,"id":"693ee614","type":"edge","w":0,"x":0,"y":0,"z":60}
{"data":{"color":"#252937","from":"4e3b156e","radius":0.5,"to":"a5009ae7"},"h":0,"id":"35e9ad42","type":"edge","w":0,"x":0,"y":0,"z":16}
{"data":{"color":"#252937","from":"4e3b156e","radius":0.5,"to":"b47db4d5"},"h":0,"id":"3779cb07","type":"edge","w":0,"x":0,"y":0,"z":17}
{"data":{"color":"#252937","from":"4e3b156e","radius":0.5,"to":"ddc1b771"},"h":0,"id":"5f25ef4a","type":"edge","w":0,"x":0,"y":0,"z":36}
{"data":{"color":"#252937","from":"4e3b156e","radius":0.5,"to":"f0f8af03"},"h":0,"id":"3574e2f9","type":"edge","w":0,"x":0,"y":0,"z":39}
{"data":{"color":"#252937","from":"4e3b156e","radius":0.5,"to":"f84e2c83"},"h":0,"id":"46aa53a1","type":"edge","w":0,"x":0,"y":0,"z":38}
{"data":{"color":"#252937","from":"4fc490dc","radius":0.5,"to":"4ab4d8a1"},"h":0,"id":"05dcad21","type":"edge","w":0,"x":0,"y":0,"z":55}
{"data":{"color":"#252937","from":"4fc490dc","radius":0.5,"to":"b7937e31"},"h":0,"id":"8ee660a9","type":"edge","w":0,"x":0,"y":0,"z":54}
{"data":{"color":"#252937","from":"60beee84","radius":0.5,"to":"12c570b5"},"h":0,"id":"14333501","type":"edge","w":0,"x":0,"y":0,"z":3}
{"data":{"color":"#252937","from":"6260bee9","radius":0.5,"to":"6ab9c23c"},"h":0,"id":"3f2449c9","type":"edge","w":0,"x":0,"y":0,"z":93}
{"data":{"color":"#252937","from":"7cba709a","radius":0.5,"to":"d56745dd"},"h":0,"id":"557cffb5","type":"edge","w":0,"x":0,"y":0,"z":69}
{"data":{"color":"#252937","from":"85dd8fc0","radius":0.5,"to":"3aaf920c"},"h":0,"id":"08f38da3","type":"edge","w":0,"x":0,"y":0,"z":41}
{"data":{"color":"#252937","from":"b47db4d5","radius":0.5,"to":"263d4f1c"},"h":0,"id":"975aea02","type":"edge","w":0,"x":0,"y":0,"z":18}
{"data":{"color":"#252937","from":"b5b647a5","radius":0.5,"to":"dca2ce1e"},"h":0,"id":"600cfc34","type":"edge","w":0,"x":0,"y":0,"z":11}
{"data":{"color":"#252937","from":"c4ddda09","radius":0.5,"to":"7e6fdbf7"},"h":0,"id":"185f8c67","type":"edge","w":0,"x":0,"y":0,"z":47}
{"data":{"color":"#252937","from":"cedd5cb6","radius":0.5,"to":"070d24d4"},"h":0,"id":"89ed3766","type":"edge","w":0,"x":0,"y":0,"z":70}
{"data":{"color":"#252937","from":"dca2ce1e","radius":0.5,"to":"4e2ea852"},"h":0,"id":"dddd6a30","type":"edge","w":0,"x":0,"y":0,"z":12}
{"data":{"color":"#252937","from":"e2cb5dbf","radius":0.5,"to":"d5ef6c9e"},"h":0,"id":"4583eac3","type":"edge","w":0,"x":0,"y":0,"z":35}
{"data":{"color":"#252937","from":"ebb22c5f","radius":0.5,"to":"21ca8bc2"},"h":0,"id":"7ab3e4c4","type":"edge","w":0,"x":0,"y":0,"z":104}
{"data":{"color":"#252937","state":"paused","time":1648668756927,"total":1554282},"h":66,"id":"7fde625d","type":"timer","w":196,"x":5886,"y":-49,"z":44}
{"data":{"color":"#252937","state":"paused","time":1648913616993,"total":83528573},"h":100,"id":"907da1ca","type":"timer","w":250,"x":9649,"y":182,"z":71}
{"data":{"color":"#252937","state":"paused","time":1648999090848,"total":6287145},"h":100,"id":"a9968b8d","type":"timer","w":250,"x":10697,"y":180,"z":74}
{"data":{"color":"#252937"},"h":100,"id":"fd57e1d2","str":"# Later\n\n","type":"text","w":250,"x":13615,"y":-42,"z":90}
{"data":{"color":"#252937"},"h":118,"id":"8b8c8a7f","str":"# Testing for big release\n\n","type":"text","w":478,"x":12848,"y":167,"z":88}
{"data":{"color":"#252937"},"h":27,"id":"ad975515","str":"**Wed March 30, 2022**\n\n","type":"text","w":230,"x":5540,"y":-150,"z":42}
{"data":{"color":"#252937"},"h":84,"id":"9fea42d3","str":"# Remaining Blockers\n\n","type":"text","w":438,"x":12209,"y":151,"z":91}
{"data":{"color":"#303f9f","fontFamily":"Cursive","state":"paused","time":1649037168666,"total":5056488},"h":100,"id":"4e71577c","type":"timer","w":250,"x":12125,"y":222,"z":94}
{"data":{"color":"#525252","fontSize":16},"h":264,"id":"3aaf920c","str":"How?\n\n- [x] multimode part\n\n\n- then for each editor that uses this\n\n  - [x] whiteboard text\n  - [x] chat\n  - [x] tasks \n  - [x] jupyter \n\n","type":"note","w":498,"x":4941,"y":151,"z":41}
{"data":{"color":"#53b79c","path":[0,0,0.9333333333324845,0,1.866666666666788,0,4.66666666666606,0,7.466666666667152,0,12.133333333333212,0,16.799999999999272,0,24.266666666666424,0,33.600000000000364,0,42,0,51.33333333333394,0,60.66666666666606,0,70.93333333333248,0,82.13333333333321,0,92.39999999999964,0.9333333333324845,99.86666666666679,1.866666666666788,107.33333333333394,1.866666666666788,120.39999999999964,2.7999999999992724,124.13333333333321,3.733333333333576,130.66666666666606,3.733333333333576,137.1999999999989,4.66666666666606,141.8666666666668,5.600000000000364,145.60000000000036,5.600000000000364,149.33333333333394,5.600000000000364,152.1333333333332,6.533333333332848,154,6.533333333332848,155.8666666666668,6.533333333332848,157.73333333333358,6.533333333332848,158.66666666666606,6.533333333332848,159.60000000000036,6.533333333332848,160.53333333333285,6.533333333332848,161.46666666666715,6.533333333332848,161.46666666666715,6.533333333332848],"radius":4},"h":8,"id":"f6633e17","type":"pen","w":162,"x":3583,"y":1637,"z":24}
{"data":{"color":"#53b79c","path":[0,0,0.9333333333324845,0,3.733333333333576,0,6.533333333332848,0,9.33333333333212,0,14,0,18.66666666666606,0,23.33333333333212,0,28.933333333332484,0,34.53333333333285,0,41.0666666666657,0.9333333333324845,46.66666666666606,0.9333333333324845,53.19999999999891,1.866666666666788,59.733333333333576,2.7999999999992724,65.33333333333212,2.7999999999992724,70,3.733333333333576,74.66666666666606,3.733333333333576,80.26666666666642,3.733333333333576,84.93333333333248,4.66666666666606,88.66666666666606,4.66666666666606,92.39999999999964,4.66666666666606,96.13333333333321,4.66666666666606,99.86666666666679,4.66666666666606,103.59999999999854,4.66666666666606,107.33333333333212,4.66666666666606,108.26666666666642,4.66666666666606,110.13333333333321,3.733333333333576,112,3.733333333333576,112.93333333333248,3.733333333333576,113.86666666666679,2.7999999999992724,114.79999999999927,2.7999999999992724,115.73333333333358,2.7999999999992724,116.66666666666606,2.7999999999992724,116.66666666666606,1.866666666666788,116.66666666666606,1.866666666666788],"radius":4},"h":6,"id":"a4878b48","type":"pen","w":118,"x":3589,"y":1683,"z":25}
{"data":{"color":"#53b79c","path":[0,0,0.9333333333343035,0,2.7999999999992724,0,3.733333333333576,0,6.533333333332848,0,9.33333333333394,0,14.933333333334303,0,21.46666666666715,0,28,0,33.600000000000364,0.9333333333343035,42.9333333333343,0.9333333333343035,53.20000000000073,0.9333333333343035,61.600000000000364,1.866666666666788,68.13333333333321,1.866666666666788,74.66666666666606,2.8000000000010914,83.06666666666752,2.8000000000010914,89.60000000000036,2.8000000000010914,96.13333333333321,2.8000000000010914,100.79999999999927,2.8000000000010914,104.53333333333285,2.8000000000010914,107.33333333333394,2.8000000000010914,111.06666666666752,2.8000000000010914,112.9333333333343,2.8000000000010914,114.79999999999927,2.8000000000010914,115.73333333333358,2.8000000000010914,116.66666666666606,2.8000000000010914,117.60000000000036,2.8000000000010914,118.53333333333285,2.8000000000010914,119.46666666666715,2.8000000000010914,120.39999999999964,2.8000000000010914,122.26666666666642,2.8000000000010914,124.13333333333321,1.866666666666788,126.9333333333343,1.866666666666788,129.73333333333358,1.866666666666788,131.60000000000036,0.9333333333343035,134.39999999999964,0.9333333333343035,136.26666666666642,0.9333333333343035,138.1333333333332,0.9333333333343035,140.9333333333343,0.9333333333343035,142.79999999999927,0.9333333333343035,145.60000000000036,0.9333333333343035,146.53333333333285,0.9333333333343035,147.46666666666715,0.9333333333343035,148.39999999999964,0.9333333333343035,149.33333333333394,0.9333333333343035,150.26666666666642,0.9333333333343035,151.20000000000073,0.9333333333343035,152.1333333333332,0.9333333333343035,153.06666666666752,0.9333333333343035,153.06666666666752,0,153.06666666666752,0],"radius":4},"h":4,"id":"6640bf14","type":"pen","w":154,"x":3577,"y":1588,"z":23}
{"data":{"color":"#53b79c","path":[0,1.866666666666788,0.9333333333343035,1.866666666666788,1.866666666666788,1.866666666666788,4.666666666667879,1.866666666666788,5.600000000000364,1.866666666666788,8.400000000001455,1.866666666666788,11.200000000000728,1.866666666666788,14,1.866666666666788,18.66666666666788,1.866666666666788,22.400000000001455,1.866666666666788,27.066666666667516,1.866666666666788,31.733333333333576,0.9333333333324845,36.400000000001455,0.9333333333324845,41.066666666667516,0.9333333333324845,44.80000000000109,0.9333333333324845,47.600000000000364,0.9333333333324845,51.33333333333394,0.9333333333324845,54.13333333333321,0.9333333333324845,56.9333333333343,0.9333333333324845,58.80000000000109,0.9333333333324845,61.600000000000364,0.9333333333324845,63.46666666666715,0.9333333333324845,65.33333333333394,0.9333333333324845,67.20000000000073,0.9333333333324845,69.06666666666752,0.9333333333324845,70.9333333333343,0.9333333333324845,71.86666666666679,0.9333333333324845,73.73333333333358,0.9333333333324845,75.60000000000036,0.9333333333324845,76.53333333333467,0.9333333333324845,77.46666666666715,0,79.33333333333394,0,81.20000000000073,0,82.13333333333321,0,83.06666666666752,0,85.86666666666679,0,86.80000000000109,0,87.73333333333358,0,89.60000000000036,0,91.46666666666715,0,92.40000000000146,0,94.26666666666824,0,96.13333333333321,0,98.9333333333343,0,99.86666666666679,0,102.66666666666788,0,105.46666666666715,0,107.33333333333394,0,109.20000000000073,0,111.06666666666752,0,112.9333333333343,0,114.80000000000109,0,116.66666666666788,0,118.53333333333467,0,120.40000000000146,0.9333333333324845,122.26666666666824,0.9333333333324845,124.13333333333321,0.9333333333324845,126,1.866666666666788,128.8000000000011,1.866666666666788,130.66666666666788,1.866666666666788,132.53333333333467,1.866666666666788,134.40000000000146,1.866666666666788,136.26666666666824,1.866666666666788,138.1333333333332,1.866666666666788,139.06666666666752,1.866666666666788,140,1.866666666666788,140.9333333333343,1.866666666666788,141.8666666666668,1.866666666666788,142.8000000000011,1.866666666666788,143.73333333333358,1.866666666666788,143.73333333333358,1.866666666666788],"radius":4},"h":3,"id":"dd1f5d63","type":"pen","w":145,"x":3568,"y":1537,"z":22}
{"data":{"color":"#b71c1c","fontSize":15},"h":100,"id":"26c83e97","str":"[x] kernel control \\- way to halt kernel, restart kernel, etc. \n\n","type":"note","w":250,"x":9267,"y":663,"z":67}
{"data":{"color":"#b71c1c","fontSize":15},"h":108,"id":"cedd5cb6","str":"[x] first output evaluation \n","type":"note","w":250,"x":10330,"y":220,"z":66}
{"data":{"color":"#b71c1c","fontSize":31,"icon":"bug"},"h":36,"id":"156ba258","type":"icon","w":36,"x":15410,"y":98,"z":103}
{"data":{"color":"#d9d9d9","path":[0,0,0.9333333333324845,0,2.7999999999992724,0,4.66666666666606,0,8.399999999999636,0,14,0,19.600000000000364,0,28,0,36.399999999999636,0,46.66666666666606,0.9333333333343035,62.53333333333285,1.866666666666788,68.13333333333321,2.8000000000010914,76.53333333333285,4.666666666667879,87.73333333333358,6.533333333334667,100.79999999999927,8.400000000001455,107.33333333333212,9.33333333333394,113.86666666666679,9.33333333333394,121.33333333333212,10.266666666666424,126,10.266666666666424,129.73333333333358,11.200000000000728,134.39999999999964,11.200000000000728,138.1333333333332,11.200000000000728,140,11.200000000000728,141.8666666666668,11.200000000000728,142.79999999999927,11.200000000000728,143.73333333333358,11.200000000000728,144.66666666666606,11.200000000000728,145.60000000000036,11.200000000000728,146.53333333333285,11.200000000000728,147.46666666666533,11.200000000000728,148.39999999999964,11.200000000000728,149.33333333333212,11.200000000000728,150.26666666666642,11.200000000000728,151.1999999999989,11.200000000000728,152.1333333333332,11.200000000000728,152.1333333333332,11.200000000000728],"radius":4},"h":12,"id":"aa9225de","type":"pen","w":153,"x":3573,"y":1456,"z":26}
{"data":{"color":"#d9d9d9","path":[0,0,0.9333333333343035,0,102.66666666666606,1.866666666666788,116.66666666666606,2.8000000000010914,129.73333333333358,3.733333333333576,142.79999999999927,4.666666666667879,150.26666666666642,5.600000000000364,154.9333333333343,5.600000000000364,158.66666666666606,5.600000000000364,162.39999999999964,6.533333333334667,165.20000000000073,6.533333333334667,167.06666666666752,6.533333333334667,168.9333333333343,6.533333333334667,169.8666666666668,6.533333333334667,170.79999999999927,6.533333333334667,171.73333333333358,6.533333333334667],"radius":4},"h":8,"id":"10d4d32b","type":"pen","w":173,"x":3591,"y":1808,"z":29}
{"data":{"color":"#d9d9d9","path":[0,0,0.9333333333343035,0,2.8000000000010914,0,6.533333333334667,0,11.200000000000728,0,17.733333333333576,0,27.066666666667516,0,39.20000000000073,0,52.26666666666824,0,64.40000000000146,0,77.46666666666715,0,87.73333333333358,0,100.80000000000109,0,104.53333333333467,0,110.13333333333503,0,114.80000000000109,0,119.46666666666715,0,122.26666666666824,0,124.13333333333503,0,126,0,126.9333333333343,0,127.86666666666679,0,128.8000000000011,0,129.73333333333358,0,130.66666666666788,0,131.60000000000036,0,131.60000000000036,0],"radius":4},"h":1,"id":"fc158e48","type":"pen","w":133,"x":3580,"y":1759,"z":28}
{"data":{"color":"#d9d9d9","path":[0,0,1.866666666666788,0,5.600000000000364,0,9.33333333333394,0,17.733333333333576,0,35.46666666666715,0,42,0,56,0,71.86666666666679,0.9333333333324845,86.79999999999927,3.733333333333576,100.79999999999927,6.533333333332848,113.86666666666679,9.33333333333212,122.26666666666642,11.199999999998909,128.79999999999927,13.066666666665697,134.39999999999964,14,139.06666666666752,15.866666666666788,143.73333333333358,16.799999999999272,147.46666666666715,17.733333333333576,149.33333333333394,17.733333333333576,150.26666666666642,18.66666666666606,151.20000000000073,18.66666666666606,151.20000000000073,19.600000000000364,152.1333333333332,19.600000000000364,152.1333333333332,19.600000000000364],"radius":4},"h":21,"id":"e36794c3","type":"pen","w":153,"x":3577,"y":1415,"z":27}
{"data":{"color":"#db482d","countdown":5100,"fontSize":32,"state":"stopped","time":1648992463122,"total":0},"h":41,"id":"fc5d7524","type":"timer","w":256,"x":10106,"y":85,"z":75}
{"data":{"color":"#dcedc8","fontSize":16},"h":130,"id":"85dd8fc0","str":"[ ]  #now  #blocker #slate #sync  proper sync for multimode slate editor, using `before-change`  event\n","type":"note","w":498,"x":4941,"y":-79,"z":40}
{"data":{"color":"#dcedc8","fontSize":16},"h":206,"id":"a5009ae7","str":"## [x] #now  dealing with scrolling cursor into view\n\n- This function `e.scrollCaretIntoView =`  has issues still and uses the old \"info\" code.\n- put a big block \\(say a list\\) with cursor in the middle, scroll it off the screen, move back and forth, and nothing happens \\(up/down works for other reasons\\).  \n\n","type":"note","w":767,"x":3414,"y":386,"z":16}
{"data":{"color":"#fe5b60","fontSize":16},"h":110,"id":"b5b647a5","str":"Puzzle \\- why doesn't splitting screen copy scroll state?\n","type":"note","w":362,"x":1306,"y":364,"z":10}
{"data":{"color":"#ffecb3","fontSize":16},"h":118,"id":"263d4f1c","str":"It works 100% as long as selection is contained in one row.  If it spans more than one row, breaks.\n","type":"note","w":455,"x":3516,"y":993,"z":18}
{"data":{"color":"#ffecb3","fontSize":16},"h":120,"id":"b47db4d5","str":"## [x]  Selection sync\n\n- just tried updating code... what will happen?\n\n","type":"note","w":455,"x":3384,"y":771,"z":17}
{"data":{"color":"#ffecb3","fontSize":16},"h":185,"id":"e2cb5dbf","str":"It breaks because virtuoso isn't overscanning, and the current implementation relies on that.  Is there a new algorithm that doesn't?  \n\n- Not using overscan is a good idea, IMHO, since everything is fast enough and it avoids a lot of subtle edge case issues.\n- So, ideas for an algorithm?\n\n","type":"note","w":642,"x":3138,"y":1189,"z":19}
{"data":{"color":"#ffecb3","fontSize":16},"h":190,"id":"d5ef6c9e","str":"OK, so I just coded up a simple algorithm for selection \\+ windowing that works perfectly  \\-\\- much better than before.  It's simpler too. Yeah!\n","type":"note","w":434,"x":3017,"y":1568,"z":35}
{"data":{"color":"#fff9c4","fontSize":15},"h":100,"id":"09e168f2","str":"[x]  adding adjacent object in frame\n\n","type":"note","w":250,"x":5624,"y":441,"z":51}
{"data":{"color":"#fff9c4","fontSize":15},"h":100,"id":"10536ced","str":"[x]  duplicating groups\n\n","type":"note","w":250,"x":5606,"y":-60,"z":43}
{"data":{"color":"#fff9c4","fontSize":15},"h":100,"id":"254a8780","str":"[ ] jupyter cell state sync \\-\\- really should do this. \n\n","type":"note","w":250,"x":13626,"y":199,"z":85}
{"data":{"color":"#fff9c4","fontSize":15},"h":100,"id":"2da9f032","str":"[x]  disable allowing user to zoom everything \n","type":"note","w":250,"x":6154,"y":-54,"z":49}
{"data":{"color":"#fff9c4","fontSize":15},"h":100,"id":"5fb596fa","str":"[x] #bug chat input doesn't scroll as you type.\n","type":"note","w":250,"x":11186,"y":596,"z":89}
{"data":{"color":"#fff9c4","fontSize":15},"h":100,"id":"be354c47","str":"[x] chat state clearing is broken. \n","type":"note","w":250,"x":11484,"y":232,"z":80}
{"data":{"color":"#fff9c4","fontSize":15},"h":100,"id":"cd41a505","str":"[x] disable scroll over jupyter cell... only if scroll possible\n","type":"note","w":250,"x":11131,"y":447,"z":86}
{"data":{"color":"#fff9c4","fontSize":15},"h":108,"id":"6b8c8297","str":"[x] #now  choose which kernel to use.\n","type":"note","w":250,"x":9615,"y":214,"z":65}
{"data":{"color":"#fff9c4","fontSize":15},"h":109,"id":"7e6fdbf7","str":"just adding to the scene, which causes canvas range to change, also breaks clicking.\n\n","type":"note","w":371,"x":5631,"y":258,"z":47}
{"data":{"color":"#fff9c4","fontSize":15},"h":112,"id":"5319157a","str":"[ ]  default sizes of newly created elements could use improvement\n","type":"note","w":315,"x":6630,"y":144,"z":52}
{"data":{"color":"#fff9c4","fontSize":15},"h":113,"id":"645d7d50","str":"I'll do this first, since it may make first output bug easier to fix... and also this is easy.\n\n","type":"note","w":250,"x":9256,"y":843,"z":73}
{"data":{"color":"#fff9c4","fontSize":15},"h":116,"id":"5eabea98","str":"[x] scroll wheel prevention should be enabled for focused element, but isn't. \n","type":"note","w":250,"x":11494,"y":379,"z":82}
{"data":{"color":"#fff9c4","fontSize":15},"h":116,"id":"c4ddda09","str":"[x]  preview window resizing breaks clicking to select new center.  drag works.\n","type":"note","w":250,"x":5607,"y":66,"z":45}
{"data":{"color":"#fff9c4","fontSize":15},"h":117,"id":"1ffe4196","str":"[x] edit focus bug \n\n- problem was just editFocus subtley...\n\n","type":"note","w":379,"x":8541,"y":158,"z":61}
{"data":{"color":"#fff9c4","fontSize":15},"h":118,"id":"4e2ea852","str":"Solution: subtle issue with hooks and unmount/remount for the children component...\n","type":"note","w":601,"x":1305,"y":792,"z":12}
{"data":{"color":"#fff9c4","fontSize":15},"h":118,"id":"dca2ce1e","str":"maybe scroll isn't copied; nothing, or stuff is re\\-used? let's investigate!\n\n","type":"note","w":601,"x":1306,"y":574,"z":11}
{"data":{"color":"#fff9c4","fontSize":15},"h":137,"id":"a921e6d3","str":"[ ]  #unclear  whenever canvas range changes... the grid looks like it is moving, which is disconcerting\n","type":"note","w":250,"x":6695,"y":-79,"z":48}
{"data":{"color":"#fff9c4","fontSize":15},"h":137,"id":"b19c0a0c","str":"Happens with the python kernel on a new whiteboard, but not after switching kernels.\n\n","type":"note","w":250,"x":10323,"y":692,"z":72}
{"data":{"color":"#fff9c4","fontSize":15},"h":152,"id":"070d24d4","str":"problem isn't happening with sage!  I don't know why it went away.  Hmm..\n\n","type":"note","w":250,"x":10314,"y":442,"z":70}
{"data":{"color":"#fff9c4","fontSize":15},"h":152,"id":"d56745dd","str":"Where to put it?  \n\n- maybe don't worry for now and just put it at the end.  Then move later.\n\n","type":"note","w":294,"x":9255,"y":395,"z":69}
{"data":{"color":"#fff9c4","fontSize":15},"h":155,"id":"60be7edf","str":"[ ] show cpu and memory usage \n\n- #blocked  on https://github.com/sagemathinc/cocalc/issues/5826\n\n","type":"note","w":348,"x":13644,"y":48,"z":79}
{"data":{"color":"#fff9c4","fontSize":15},"h":166,"id":"36acd6ea","str":"[x]  show kernel toolbar more\n\n- [x]  any time  tool is selected\n- [x]  any time a jupyter cell is selected\n\n","type":"note","w":421,"x":9585,"y":895,"z":77}
{"data":{"color":"#fff9c4","fontSize":15},"h":321,"id":"526fe2a3","str":"latex issue with \\\\begin{math} not being supported!\n\n```\n\\begin{math}2^3\\end{math}\n```\n\n","type":"note","w":667,"x":8477,"y":438,"z":63}
{"data":{"color":"#fff9c4","fontSize":15},"h":342,"id":"7763a9b9","str":"[x] show something when code is queued to run or running, and it should have the \"interrupt\" action. \n\n- [x] in the top bar \n\n\n- [x] in the cell \n  - almost done, except actions \\(run, interrupt\\-\\- don't work\\)\n  - \n\n","type":"note","w":250,"x":10646,"y":223,"z":68}
{"data":{"color":"#fff9c4","fontSize":15},"h":364,"id":"86ae19f7","str":"### Let's try to implement above idea.\n\n- i'm trying to figure out how to take a row \\(top level element\\) and identify where it is AFTER applying upstream changes.\n- No clue how yet!  Obvious stuff doesn't work at all.\n- Hmmm...\n- OK, there is Point.transform, which we use for the cursor.  So we can use this via the transforms.  This of course doesn't work unless using transforms.\n\n_**No frickin' way!**_ It turns out that scrollToIndex in virtuoso implements an offset parameter too.  That makes it VERY powerful.  Wow.\n\nAnd this actually works!  :shrug: \n\n","type":"note","w":685,"x":261,"y":942,"z":4}
{"data":{"color":"#fff9c4","fontSize":15},"h":619,"id":"12c570b5","str":"So what is the right way to do this with windowing?\n\n1. Figure out what **the invariant** is that we want to preserve and define it.\n2. Figure out **how** to preserve it.\n\nCodemirror of course solves this problem.\n\nWhat is the invariant?  The inputs:\n\n- cursor position vertically... \n  - but not really optimal anyways, since it is a bit vague\n  - also, what if there is no selection?  it's still meaningful to preserve stuff\n- row range indexes that are visible and rendered \\-\\- this **is** the invariant that is being used.\n  - we can convert these indexes to node ids using that weakref map.\n- the scroll position \\(i.e., scrollTop\\) of the scroller.  I.e., it's not just the range that is rendered, but how it is positioned exactly vertically.\n\nCould I choose one single row before the sync update \\(e.g., the first one, the middle one?\\), then:\n\n1. do the update\n2. find the index of that same row after the update, if it is unchanged \\(just give up if if changed, or try next row\\)\n3. somehow ensure that rendering starts with that row again\n4. finally, adjust scrollTop of scroller a little to ensure that the row stays in same position.\n\nLet's try it!\n\n","type":"note","w":685,"x":208,"y":238,"z":3}
{"data":{"color":"#fff9c4","fontSize":15},"h":78,"id":"7cba709a","str":"[x]  link to open underlying ipynb file \n","type":"note","w":294,"x":9255,"y":217,"z":64}
{"data":{"color":"#fff9c4","fontSize":15},"h":89,"id":"6ab9c23c","str":"[x] also implement similar auto resize of Jupyter notebook cells. \n","type":"note","w":487,"x":12133,"y":447,"z":93}
{"data":{"color":"#fff9c4","fontSize":15},"h":94,"id":"e2a14955","str":"[x] Share server/static \\- does it still work?\n","type":"note","w":375,"x":12874,"y":280,"z":87}
{"data":{"color":"#fff9c4","fontSize":15},"h":97,"id":"6260bee9","str":"[x]  Make resizing of notes much more robust \\(both grow and shrink\\) and do so instantly!\n","type":"note","w":463,"x":12134,"y":250,"z":92}
{"data":{"color":"#fff9c4"},"h":112,"id":"0a5eb217","str":"[x]  issue with markdown caching and lists and tightness... again.\n\n","type":"note","w":250,"x":14128,"y":147,"z":95}
{"data":{"color":"#fff9c4"},"h":126,"id":"60597076","str":"#blocker [x] sage worksheet output involving math formulas is completely broken.\n\n- https://sagemathcloud.zendesk.com/agent/tickets/12206\n\n","type":"note","w":518,"x":14578,"y":113,"z":97}
{"data":{"color":"#fff9c4"},"h":143,"id":"21ca8bc2","str":"facts:\n\n- this didn't happen a month ago\n- only in jupyter cells\n- goes away if you type some things then delete them in a cell.\n\n","type":"note","w":481,"x":15488,"y":290,"z":104}
{"data":{"color":"#fff9c4"},"h":148,"id":"7b0a1aa5","str":"[ ]  while I'm in the neighborhood, I'm going to improve the url editor bar for slate.\n\nAgh, no!  It's complicated because the target of the link is arbitrarily complicated itself... not just text.\n","type":"note","w":473,"x":14858,"y":335,"z":98}
{"data":{"color":"#fff9c4"},"h":369,"id":"4101819d","str":"This was my crazy idea for using selection, but it flickers!  So utterly useless, obviously.  On to the next idea...\n\n```ts\n        const elt = $('[data-virtuoso-scroller=\"true\"]');\n        const before = window\n          .getSelection()\n          .getRangeAt(0)\n          .getBoundingClientRect().y;\n        console.log(\"before\", before);\n        applyOperations(editor, operations);\n        setTimeout(() => {\n          const after = window\n            .getSelection()\n            .getRangeAt(0)\n            .getBoundingClientRect().y;\n          console.log(\"after delay\", after);\n          elt.scrollTop(elt.scrollTop() + (after - before));\n        }, 0);\n```\n\n","type":"note","w":685,"x":-1350,"y":314,"z":1}
{"data":{"color":"#fff9c4"},"h":473,"id":"60beee84","str":"Next iteration on the above, and this doesn't flicker and works in simple cases.  But of course if you delete a lot above the current window, it just breaks.  This is basically the right solution if we were not using windowing, maybe.\n\n```ts\nfunction getCursorY(): number | null {\n  const sel = getSelection();\n  if (sel == null || sel.rangeCount == 0) {\n    return null;\n  }\n  return sel.getRangeAt(0)?.getBoundingClientRect().y;\n}\n\nfunction preserveCursorScrollPosition() {\n  const before = getCursorY();\n  if (before === null) return;\n  requestAnimationFrame(() => {\n    const after = getCursorY();\n    if (after === null) return;\n    const elt = $('[data-virtuoso-scroller=\"true\"]');\n    if (elt) {\n      elt.scrollTop((elt.scrollTop() ?? 0) + (after - before));\n    }\n  });\n}\n```\n\n","type":"note","w":685,"x":-577,"y":238,"z":2}
{"data":{"color":"#fff9c4"},"h":77,"id":"50a1465f","str":"It's a subtle sync problem!  Wow.  Fixed.\n","type":"note","w":481,"x":15488,"y":533,"z":105}
{"data":{"color":"#fff9c4"},"h":85,"id":"1860cb2d","str":"overflow in markdown mode is annoying\n\n","type":"note","w":250,"x":14601,"y":559,"z":101}
{"data":{"color":"#fff9c4"},"h":90,"id":"ebb22c5f","str":"[x]  weird new paren jump \\- wtf?\n","type":"note","w":250,"x":15424,"y":128,"z":102}
{"data":{"color":"#fff9c4"},"h":99,"id":"ea081c4f","str":"How to fix?  \n\nLook explicitly\nat syncCache\n\n","type":"note","w":250,"x":14129,"y":332,"z":96}
{"data":{"color":"#ffff00","opacity":0.4,"path":[0,0,0.9333333333324845,0,3.733333333331757,0,8.399999999999636,0,14,0,22.399999999999636,0,31.733333333331757,0,48.53333333333285,0,55.0666666666657,0,67.19999999999891,0,75.59999999999854,0,82.13333333333321,0,90.53333333333285,0,98.93333333333248,0,105.46666666666533,0,111.0666666666657,0,115.73333333333176,0,119.46666666666533,0,122.26666666666642,0,125.0666666666657,0,126.93333333333248,0,128.79999999999927,0,129.73333333333176,0,130.66666666666606,0,131.59999999999854,0,132.53333333333285,0,132.53333333333285,0],"radius":15},"h":1,"id":"fb2a75cb","type":"pen","w":134,"x":3591,"y":1538,"z":30}
{"data":{"color":"#ffff00","opacity":0.4,"path":[0,0,1.866666666666788,0,4.666666666667879,0,9.33333333333394,0,24.266666666666424,0,34.53333333333285,0,45.733333333333576,0,57.86666666666679,0,68.13333333333321,0,75.60000000000036,0,84,0,90.53333333333285,0,94.26666666666642,0,98,0,100.80000000000109,0,103.60000000000036,0,104.53333333333285,0,105.46666666666715,0,106.39999999999964,0,106.39999999999964,0],"radius":15},"h":1,"id":"4ffdd25f","type":"pen","w":107,"x":3574,"y":1590,"z":31}
{"data":{"color":"#ffff00","opacity":0.4,"path":[0,1.8072443173823558,0.9036221586920874,1.8072443173823558,1.8072443173841748,1.8072443173823558,2.710866476074443,1.8072443173823558,4.518110793458618,1.8072443173823558,5.421732952150705,1.8072443173823558,8.132599428225149,1.8072443173823558,12.650710221683767,1.8072443173823558,18.97606533252474,1.8072443173823558,26.2050426020578,0.9036221586902684,33.434019871589044,0.9036221586902684,42.47024145850628,0,50.60284088672961,0,57.83181815626267,0,75.90426133009532,0,80.42237212355394,0,84.03686075832047,0.9036221586902684,85.84410507570283,0.9036221586902684,87.651349393087,1.8072443173823558,88.55497155177727,1.8072443173823558,89.45859371046936,1.8072443173823558,90.36221586916145,1.8072443173823558,91.26583802785353,1.8072443173823558,93.07308234523589,1.8072443173823558,94.88032666262006,1.8072443173823558,102.10930393215313,1.8072443173823558,106.62741472560992,1.8072443173823558,113.85639199514299,1.8072443173823558,116.56725847121743,1.8072443173823558,119.27812494729369,1.8072443173823558,121.98899142336813,1.8072443173823558,124.69985789944258,1.8072443173823558,127.41072437551702,1.8072443173823558,129.2179686929012,2.710866476074443,130.12159085159146,2.710866476074443,131.02521301028355,2.710866476074443,131.92883516897564,2.710866476074443,132.83245732766773,2.710866476074443,133.736079486358,2.710866476074443,134.63970164505008,2.710866476074443,136.44694596243426,2.710866476074443,137.35056812112452,2.710866476074443,139.1578124385087,2.710866476074443,140.96505675589106,2.710866476074443,142.77230107327523,2.710866476074443,144.5795453906576,2.710866476074443,145.48316754934967,2.710866476074443,147.29041186673203,2.710866476074443,148.19403402542412,2.710866476074443,150.0012783428083,2.710866476074443,150.90490050149856,2.710866476074443,151.80852266019065,2.710866476074443,152.71214481888273,2.710866476074443,153.61576697757482,2.710866476074443,153.61576697757482,1.8072443173823558,154.5193891362651,1.8072443173823558,154.5193891362651,1.8072443173823558],"radius":15},"h":4,"id":"c8708c3c","type":"pen","w":156,"x":3574,"y":1460,"z":37}
{"data":{"color":"#ffffff","fontSize":16},"h":110,"id":"f84e2c83","str":"[x]  sync map situation?\n\n- let's take a look\n\n","type":"note","w":427,"x":2558,"y":-130,"z":38}
{"data":{"color":"#ffffff","fontSize":16},"h":146,"id":"f0f8af03","str":"[x]  page up/down?\n","type":"note","w":462,"x":3070,"y":-50,"z":39}
{"data":{"color":"#ffffff","fontSize":16},"h":167,"id":"ddc1b771","str":"[x]  Vertical scroll position is no longer preserved.  I broke it.\n","type":"note","w":604,"x":3308,"y":231,"z":36}
{"data":{"color":"#ffffff","fontSize":16},"h":319,"id":"4e3b156e","str":"#blocker #slate #now more broken stuff\n\n- [x] clicking on table of contents doesn't work for maybe obvious reasons; need to scroll thing into DOM before getting DOM node, i.e., need to implement `ReactEditor.scrollIntoDOM`\n\n- [ ] pg up/pg down/end/home \\-\\- need to also intercept and explicitly scroll when using windowing...  not sure how.  \n\n- [x] **scrolling needs to update selection \\(TODO to implement\\)**\n\n- [x] sync mapping from slate to plain text \\(alt enter\\) breaks on larger documents.  Other direction seems robust. \n\n","type":"note","w":770,"x":2434,"y":473,"z":14}